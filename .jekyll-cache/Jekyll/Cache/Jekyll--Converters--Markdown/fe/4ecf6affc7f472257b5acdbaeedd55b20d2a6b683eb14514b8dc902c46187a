I"	<p>기본적으로 nodejs 모듈에는 mysql를 제어하는 모듈이 없다. 
pm install -S mysql 을 해주면 packson(dependencies) 에 추가가된다.  소스코드를 나중에 복제하고 사용할때 편리하기 위해</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">db</span><span class="o">.</span><span class="na">query</span><span class="o">(</span><span class="no">SELECT</span> <span class="o">*</span> <span class="no">FROM</span> <span class="n">topic</span> <span class="no">WHERE</span> <span class="n">id</span><span class="o">=</span><span class="err">$</span><span class="o">{</span><span class="n">query</span><span class="o">.</span><span class="na">id</span><span class="o">}</span><span class="err">`</span><span class="o">,</span><span class="n">function</span><span class="o">(</span><span class="n">error2</span><span class="o">,</span><span class="n">topic</span><span class="o">){</span> <span class="c1">//이런식으로 쓰면 사용자에게 공격을 당할 수 있다.</span>

<span class="n">db</span><span class="o">.</span><span class="na">query</span><span class="o">(</span><span class="err">`</span><span class="no">SELECT</span> <span class="o">*</span> <span class="no">FROM</span> <span class="n">topic</span> <span class="no">WHERE</span> <span class="n">id</span><span class="o">=?</span><span class="err">`</span><span class="o">,[</span><span class="n">queryData</span><span class="o">.</span><span class="na">id</span><span class="o">],</span><span class="n">function</span><span class="o">(</span><span class="n">error2</span><span class="o">,</span><span class="n">topic</span><span class="o">){</span> <span class="c1">//id에 ? 에 두번쨰 인자가 치환되서 들어간다.보안성이좋음</span>

 <span class="n">response</span><span class="o">.</span><span class="na">writeHead</span><span class="o">(</span><span class="mi">302</span><span class="o">,</span> <span class="o">{</span><span class="nl">Location:</span> <span class="err">`</span><span class="o">/?</span><span class="n">id</span><span class="o">=</span><span class="err">$</span><span class="o">{</span><span class="n">result</span><span class="o">.</span><span class="na">insertId</span><span class="o">}</span><span class="err">`</span><span class="o">});</span> <span class="c1">//추가된 id 을 가져오는 방법 (바로 추가된 id로 리다이렉션이 됨)</span>
</code></pre></div></div>
:ET