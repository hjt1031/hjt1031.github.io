---
title: "[c]기초11-포인터연산&함수"
---

# 포인터 연산 사용하기
```c
struct Data {
	int num1;
	int num2;
};
int main40() {
	//포인터 연산으로 메모리 주소 조작하기
	int numArr[5] = { 11,22,33,44,55 };
	int* numPtrA;
	int* numPtrB;
	int* numPtrC;

	numPtrA = numArr;

	numPtrB = numPtrA + 1;
	numPtrC = numPtrA + 2;

	printf("%p\n", numPtrA); //00D8FDB0
	printf("%p\n", numPtrB); //00D8FDB4 (22가 있는 곳)
	printf("%p\n", numPtrC); //00D8FDB8 4바이트 만큼 2번  순방향으로 이동 (33이있는 곳)

	numPtrA = &numArr[2];

	numPtrB = numPtrA - 1;
	numPtrC = numPtrA - 2;

	printf("%p\n", numPtrA); //0076F858
	printf("%p\n", numPtrB); //0076F854
	printf("%p\n", numPtrC); //0076F850

	//포인터 연산과 역참조 사용하기
	printf("%d\n", *numPtrB); // 22
	printf("%d\n", *numPtrC); // 11

	printf("%d\n", *(numPtrB+1)); // 22
	printf("%d\n", *numPtrC+1); // 12

	//void 포인터로 포인터 연산하기
	void* ptr = malloc(100);

	printf("%p", ptr);
	printf("%p", (int*)ptr + 1); //9424
	printf("%p", (int*)ptr - 1); //941C

	void* ptr2 = ptr;
	printf("%p", ++(int*)ptr2); //9424
	printf("%p", --(int*)ptr2); //9420
	 
	printf("%p", ((int*)ptr2)++); //9420
	printf("%p", ((int*)ptr2)--); //9424
	free(ptr);

	//구조체 포인터로 포인터 연산하기
	struct Data d[3] = { {10,20},{30,40},{50,60} };
	struct Data* ptr;

	ptr = d;

	printf("%d %d\n", (ptr + 1)->num1, (ptr + 1)->num2);// 30, 40
	printf("%d %d\n", (ptr + 2)->num1, (ptr + 2)->num2);// 50 ,60
	return 0;
}
```


# hello world 출력함수 만들기
```c
void hello(); //함수 가 있다고 정의를 해줘야 에러가 나지 않음
int main41() {
	hello();
	//hello 함수를 main 함수 밑에 사용하면 에러 발생 c언어 컴파일은 위에서부터 아래로 컴파일 하기 떄문
	//그래서 함수 선언을 해야함
	return 0;
}
void hello()
{
	printf("Hello world");
}
```


# 함수에서 반환값 사용하기
```c
int one() {
	return 1;
}
float realNumber() {
	return 1.234567f;
}
bool truth() {
	return true;
}
int* ten()
{
	int num1 = 10;

	return &num1; //잘못 된 방법 malloc 함수를 사용해야함.

	int* numPtr = malloc(sizeof(int));

	*numPtr = 10;

	return numPtr;
}

void* allocMemory()
{
	void* ptr = malloc(100);

	return ptr;
}
struct Person {
	char name[20];
	int age;
	char address[100];
};
struct Person getPerson() {

	struct Person p;

	strcpy(p.name, "홍길동");
	p.age = 30;
	strcpy(p.address, "서울시 용산구 한남동");

	return p;
}
int main42() {
	int num1;

	num1 = one();

	printf("%d\n", num1);
	printf("%d\n", one()); //동일하다

	float num1;
	bool b1;

	num1 = realNumber();
	b1 = truth();

	printf("%f\n", num1);
	printf("%d\n", b1);

	//포인터 반환하기
	int* numPtr;

	numPtr = ten();

	printf("%d\n", *numPtr);

	free(numPtr);

	// void포인터 반환하기
	char* s1 = allocMemory();
	strcpy(s1, "Hello, world");
	printf("%s\n", s1);
	free(s1);

	int* numPtr1 = allocMemory();
	numPtr1[0] = 10;
	numPtr1[1] = 20;
	printf("%d %d\n", numPtr1[0], numPtr1[1]); //10 ,20 출력
	free(numPtr1);

	//구조체와 구조체 포인터 반환하기
	struct Person p1;

	p1 = getPerson();
	printf("이름 : %s\n", p1.name);
	printf("나이 : %s\n", p1.age);
	printf("주소 : %s\n", p1.address);
	return 0;
}
```
